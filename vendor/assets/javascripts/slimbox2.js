/*
	Slimbox v2.04 - The ultimate lightweight Lightbox clone for jQuery
	(c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
(function(e){function _(){var n=t.scrollLeft(),r=t.width();e([S,L]).css("left",n+r/2);if(a){e(E).css({left:n,top:t.scrollTop(),width:r,height:t.height()})}}function D(n){if(n){e("object").add(v?"select":"embed").each(function(e,t){m[e]=[t,t.style.visibility];t.style.visibility="hidden"})}else{e.each(m,function(e,t){t[0].style.visibility=t[1]});m=[]}var r=n?"bind":"unbind";t[r]("scroll resize",_);e(document)[r]("keydown",P)}function P(t){var r=t.keyCode,i=e.inArray;return i(r,n.closeKeys)>=0?R():i(r,n.nextKeys)>=0?B():i(r,n.previousKeys)>=0?H():false}function H(){return j(o)}function B(){return j(u)}function j(e){if(e>=0){i=e;s=r[i][0];o=(i||(n.loop?r.length:0))-1;u=(i+1)%r.length||(n.loop?0:-1);q();S.className="lbLoading";y=new Image;y.onload=F;y.src=s}return false}function F(){S.className="";var t=n.scaler*Math.min(e(window).width()/y.width,e(window).height()/y.height);y.width*=t;y.height*=t;e(T).attr({src:s});e(x).css({visibility:"hidden",display:""});e(N).width(y.width);e([N,C,k]).height(y.height);e(O).html(r[i][1]||"");e(M).html((r.length>1&&n.counterText||"").replace(/{x}/,i+1).replace(/{y}/,r.length));if(o>=0){b.src=r[o][0]}if(u>=0){w.src=r[u][0]}l=x.offsetWidth;c=x.offsetHeight;var a=Math.max(0,f-c/2);if(S.offsetHeight!==c){e(S).animate({height:c,top:a},n.resizeDuration,n.resizeEasing)}if(S.offsetWidth!==l){e(S).animate({width:l,marginLeft:-l/2},n.resizeDuration,n.resizeEasing)}e(S).queue(function(){e(L).css({width:l,top:a+c,marginLeft:-l/2,visibility:"hidden",display:""});e(x).css({display:"none",visibility:"",opacity:""}).fadeIn(n.imageFadeDuration,I)})}function I(){if(o>=0){e(C).show()}if(u>=0){e(k).show()}e(A).css("marginTop",-A.offsetHeight).animate({marginTop:0},n.captionAnimationDuration);L.style.visibility=""}function q(){y.onload=null;y.src=b.src=w.src=s;e([S,x,A]).stop(true);e([C,k,x,L]).hide()}function R(){if(i>=0){q();i=o=u=-1;e(S).hide();e(E).stop().fadeOut(n.overlayFadeDuration,D)}return false}var t=e(window),n,r,i=-1,s,o,u,a,f,l,c,h,p,d,v=!window.XMLHttpRequest,m=[],g=document.documentElement,y={},b=new Image,w=new Image,E,S,x,T,N,C,k,L,A,O,M;e(function(){e("body").append(e([E=e('<div id="lbOverlay" />')[0],S=e('<div id="lbCenter" />')[0],L=e('<div id="lbBottomContainer" />')[0]]).css("display","none"));x=e('<div id="lbImage" />').appendTo(S).append(N=e('<div style="position: relative;" />').append([T=e('<img id="lbSlide" src="/assets/white.gif" alt="" />')[0],k=e('<a id="lbNextLink" href="#" />').text(".").click(B)[0],C=e('<a id="lbPrevLink" href="#" />').text(".").click(H)[0]])[0])[0];window.nextlink=document.getElementById("lbNextLink");A=e('<div id="lbBottom" />').appendTo(L).append([e('<a id="lbCloseLink" href="#" />').add(E).click(R)[0],O=e('<div id="lbCaption" />')[0],M=e('<div id="lbNumber" />')[0],e('<div style="clear: both;" />')[0]])[0]});e.slimbox=function(i,s,o){n=e.extend({loop:false,overlayOpacity:.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,slideInterval:0,scaler:.75,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},o);if(typeof i==="string"){i=[[i,s]];s=0}f=t.scrollTop()+t.height()/2;l=n.initialWidth;c=n.initialHeight;h=n.slideInterval;e(S).css({top:Math.max(0,f-c/2),width:l,height:c,marginLeft:-l/2}).show();a=v||E.currentStyle&&E.currentStyle.position!=="fixed";if(a){E.style.position="absolute"}e(E).css("opacity",n.overlayOpacity).fadeIn(n.overlayFadeDuration);_();D(1);r=i;n.loop=n.loop&&r.length>1;if(h>0){p=setInterval(function(){B()},1e3*h)}else{clearInterval(p)}return j(s)};e.fn.slimbox=function(t,r,i){r=r||function(e){return[e.href,e.title]};i=i||function(){return true};var s=this;n=e.extend({slideInterval:0},t);h=n.slideInterval;return s.unbind("click").click(function(){var n=this,o=0,u,a=0,f;u=e.grep(s,function(e,t){return i.call(n,e,t)});for(f=u.length;a<f;++a){if(u[a]===n){o=a}u[a]=r(u[a],a)}return e.slimbox(u,o,t)})}})(jQuery)

// AUTOLOAD CODE BLOCK (MAY BE CHANGED OR REMOVED)
if (!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)) {
	jQuery(function($) {
		$("a[rel^='lightbox']").slimbox({/* Put custom options here */}, null, function(el) {
			return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
		});
	});
}